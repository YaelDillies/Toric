\section{Affine toric varieties and toric ideals}


In this section, we define toric ideals, show that one can construct toric varieties from them
and that all toric varieties arise in this way.


\subsection{Toric ideals and affine monoids}


\begin{definition}[Lattice ideal]
  \label{1-1-10-lat-ideal}
  \uses{}
  \lean{AddMonoidAlgebra.monoidIdeal}
  \leanok

  Let $R$ be a ring.
  Let $G$ be a free abelian group and $M$ an affine monoid whose Grothendieck group is $G$.
  Let $L \le G$ be a sublattice.
  The \emph{lattice ideal} of $L$ is the $R$-ideal of $R[M]$ defined by
  \[
    I_L := \langle X^\alpha - X^\beta | \alpha, \beta \in M, \alpha - \beta \in L\rangle.
  \]
\end{definition}


\begin{definition}
  \label{1-1-10-tor-ideal}
  \uses{1-1-10-lat-ideal}
  \lean{AddMonoidAlgebra.IsToricIdeal}
  \leanok

  Let $R$ be a ring. Let $M$ be an affine monoid.
  A \emph{toric ideal} is a prime lattice $R$-ideal of $R[M]$.
\end{definition}


\begin{proposition}[An ideal is toric iff it is prime and generated by binomials]
  \label{1-1-11-toric-ideal-gen-binomial}
  \uses{1-1-10-tor-ideal}
  \lean{AddMonoidAlgebra.isToricIdeal_iff_exists_span_single_sub_single}
  % \leanok

  An ideal is toric if and only if it's prime and generated by binomials $X^\alpha - X^\beta$.
\end{proposition}
\begin{proof}
  \uses{1-1-1-subgroup-torus, 1-1-9-ideal-ya}
  % \leanok

  A toric ideal is prime and generated by binomials by definition.

  Assume $I$ is prime and generated by $X^\alpha - X^\beta$ ranging over $(\alpha, \beta) \in S$
  for some set $S \subseteq M \times M$.

  Note first that $I$ doesn't contain any monomial.
  Indeed, $I$ is contained in the kernel of the map $R[M] \to R$ given by $X^m \mapsto 1$.

  Since $I$ is prime, this means that
  \[
    X^{\alpha + \gamma} - X^{\beta + \gamma} \in I \iff X^\alpha - X^\beta \in I.
  \]
  In particular, if $\alpha_1 - \beta_1 = \alpha_2 - \beta_2$, then
  Since $I$ is prime, this means that
  \[
    X^{\alpha_1} - X^{\beta_1} \in I
      \iff X^{\alpha_1 + \beta_2} - X^{\beta_1 + \beta_2} \in I
      \iff X^{\alpha_2 + \beta_1} - X^{\beta_1 + \beta_2} \in I
      \iff X^{\alpha_2} - X^{\beta_2} \in I.
  \]

  Now, we claim that $I = I_L$ where $L \le G$ is given by
  \[
    \span\{\delta - \varepsilon | (\delta, \varepsilon) \in S\}.
  \]

  Clearly, $I \subseteq I_L$.

  For the other direction, assume $\delta, \varepsilon \in M, \delta - \varepsilon \in L$.
  Let's prove $X^\delta - X^\varepsilon \in I$ by induction on $\delta - \varepsilon \in L$:
  \begin{itemize}
    \item If $\delta - \varepsilon = 0$, then $X^\delta - X^\varepsilon = 0 \in I$.
    \item If $\delta_1 - \varepsilon_1 = \varepsilon_2 - \delta_2$
      and $X^{\delta_2} - X^{\varepsilon_2} \in I$, then
      \[
        X^{\delta_1} - X^{\varepsilon_1} \in I \iff X^{\varepsilon_2} - X^{\delta_2}
          \iff X^{\delta_1} - X^{\varepsilon_1}
      \]
      by the remark, and this holds by assumption.
    \item If $\delta - \varepsilon = \alpha - \beta$ where $(\alpha, \beta) \in S$, then
      \[
        X^\delta - X^\varepsilon \in I \iff X^\alpha - X^\beta \in I
      \]
      by the remark, and this holds by assumption.
    \item Assume $\delta_1, \delta_2, \varepsilon_1, \varepsilon_2$ are such that
      $X^{\delta_1} - X^{\varepsilon_1}, X^{\delta_2} - X^{\varepsilon_2} \in I$.
      Then
      \[
        X^{\delta_1 + \delta_2} - X^{\varepsilon_1 + \varepsilon_2}
          = (X^{\delta_1} - X^{\varepsilon_1})X^{\delta_2}
            + X^{\varepsilon_1}(X^{\delta_2} - X^{\varepsilon_2})
          \in I.
      \]
  \end{itemize}
\end{proof}


\begin{proposition}[The vanishing ideal of a closed torus embedding]
  \label{5-3-van-tor-emb}
  \uses{1-1-phiAprime, 1-1-7-ya, 1-1-10-lat-ideal}
  % \lean{}
  % \leanok

  Let $k$ be a field.
  Let $V$ be a toric variety over $k$.
  Let $i : V \hookrightarrow \G_m^n$ be a closed torus embedding.
  Then the vanishing ideal of $i$ is toric.
\end{proposition}
\begin{proof}
  \uses{0-ker-sum, 0-diag-spec}
  % \leanok


\end{proof}

\section{Hopf algebras}


\subsection{Ideals and quotients}


\begin{definition}[Coideal]
  \label{0-coideal}
  \uses{}
  % \lean{}
  % \leanok

  Let $R$ be a commutative ring and $(C,\Delta,\varepsilon)$ be a coalgebra over $R$.
  An $R$-submodule $I$ of $C$ is a \emph{coideal} of $C$ if
  $\Delta(I) \subseteq \bar{I \otimes_R C} + \bar{C \otimes_R I}$ and $\varepsilon(I)=0$,
  where $\bar{\cdot}$ denotes the image in $C \otimes_R C$.
\end{definition}


\begin{proposition}[Quotient coalgebra]
  \label{0-coquot}
  \uses{0-coideal}
  % \lean{}
  % \leanok

  If $C$ is a coalgebra over $R$ and $I$ is a coideal,
  the quotient $C /I$ is equipped with a canonical $R$-coalgebra structure.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  Toddler street.
\end{proof}


\begin{proposition}[Quotient coalgebra map]
  \label{0-coquot-hom}
  \uses{0-coquot}
  % \lean{}
  % \leanok

  If $C$ is a coalgebra over $R$ and $I$ is a coideal,
  the quotient map $C \to C / I$ is a coalgebra homomorphism.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  Do I even need to say it?
\end{proof}


\begin{definition}[Bialgebra ideal]
  \label{0-biideal}
  \uses{0-coideal}
  % \lean{}
  % \leanok

  Let $B$ be a bialgebra over a commutative ring $R$.
  A \emph{bialgebra ideal} $I$ is an ideal which is also a coideal.
\end{definition}


\begin{proposition}[Quotient bialgebra]
  \label{0-biquot}
  \uses{0-biideal}
  % \lean{}
  % \leanok

  If $B$ is a bialgebra over $R$ and $I$ is a bialgebra ideal,
  the quotient $B / I$ is equipped with a canonical $R$-bialgebra structure.
\end{proposition}
\begin{proof}
  \uses{0-coquot}
  % \leanok

  Cmon.
\end{proof}


\begin{proposition}[Quotient bialgebra map]
  \label{0-biquot-hom}
  \uses{0-biquot}
  % \lean{}
  % \leanok

  If $B$ is a bialgebra over $R$ and $I$ is a bialgebra ideal,
  the quotient map $B \to B / I$ is a bialgebra homomorphism.
\end{proposition}
\begin{proof}
  \uses{0-coquot-hom}
  % \leanok

  Just do it.
\end{proof}


\begin{definition}[Hopf ideal]
  \label{0-hopf-ideal}
  \uses{0-biideal}
  % \lean{}
  % \leanok

  Let $A$ be a Hopf algebra over a commutative ring $R$.
  A \emph{Hopf ideal} $I$ is a bialgebra ideal such that $S(I)=I$.
\end{definition}

\begin{proposition}[Quotient Hopf algebra]
  \label{0-hopf-quot}
  \uses{0-hopf-ideal}
  % \lean{}
  % \leanok

  If $A$ is a Hopf algebra over $R$ and $I$ is a Hopf ideal,
  the quotient $A / I$ is equipped with a canonical Hopf algebra structure over $R$.
\end{proposition}
\begin{proof}
  \uses{0-biquot}
  % \leanok

  Cmon.
\end{proof}


\begin{proposition}[Quotient Hopf algebra map]
  \label{0-hopf-quot-hom}
  \uses{0-hopf-quot}
  % \lean{}
  % \leanok

  If $A$ is a Hopf algebra over $R$ and $I$ is a Hopf ideal,
  the quotient map $A \to A / I$ is a Hopf algebra homomorphism.
\end{proposition}
\begin{proof}
  \uses{0-biquot-hom}
  % \leanok

  Follows immediately from Proposition \ref{0-biquot-hom}.
\end{proof}


\subsection{Group algebras}


\begin{proposition}[Freeness of group algebras under an injective hom]
  \label{0-grp-alg-free}
  \uses{}
  % \lean{}
  % \leanok

  Let $R$ be a commutative ring.
  Let $G, H$ be abelian groups and $f : G \to H$ an injective group hom.
  Then $R[H]$ is a free $R[G]$-module.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  Pick a section $\sigma : H / f(G) \to H$ and the unique map $\varphi : H \to G$
  such that $h = \sigma(h f(G)) f(\varphi(h))$.
  We claim that $R[H]$ is isomorphic to $R[G]^{\oplus H / f(G)}$, from which the result follows,
  as such:
  \begin{align*}
    R[G]^{\oplus H / f(G)} & \simeq R[H] \\
    \varphi(h) e_{h f(G)} & \mapsto h
    g e_x & \mapsfrom \sigma(x) f(g)
  \end{align*}
  Those two functions are clearly inverse to each other,
  and the forward map is clearly $R[G]$-linear.
\end{proof}


\begin{proposition}[The kernel of a map on direct sums]
  \label{0-ker-mon-alg}
  \uses{}
  % \lean{}
  % \leanok

  Let $G$ be an abelian group generated by a set $S$.
  Let $A, B$ be arbitrary indexing types and $f : A \to B$ a function.
  Write $f^\oplus : G^{\oplus A} \to G^{\oplus B}$ the pushforward.
  Then
  \[
    \ker f^\oplus = \Span\{gX^a_1 - gX^a_2 | g \in S, a_1, a_2 \in A, f(a_1) = f(a_2)\}.
  \]
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  Write $I = \Span\{gX^a_1 - gX^a_2 | g \in G, a_1, a_2 \in A, f(a_1) = f(a_2)\}$ for brevity.

  Note that we can assume WLOG that $f$ is surjective.
  Write $\sigma : B \to A$ a section of $f$.

  Let's prove by induction on $x \in G^\oplus A$ that $\sigma^\oplus(f^\oplus(x)) \equiv x \mod I$:
  \begin{itemize}
    \item $x = 0$: $\sigma^\oplus(f^\oplus(0)) = 0$
    \item $x = gX^a$:
      $\sigma^\oplus(f^\oplus(gX^a)) = gX^{\sigma(f(a))} \equiv gX^a \mod I$ as $S$ generates
    \item $x + y$: Assume the induction hypothesis for $x$ and $y$. Then
      \[
        \sigma^\oplus(f^\oplus(x + y)) = \sigma^\oplus(f^\oplus(x)) + \sigma^\oplus(f^\oplus(y))
          \equiv x + y \mod I
      \]
  \end{itemize}

  Now, for any $x \in G^\oplus A$,
  \[
    x \in \ker f^\oplus \iff f^\oplus(x) = 0 \iff
      \sigma^\oplus(f^\oplus(x)) \equiv 0 \mod I \iff x \equiv 0 \mod I
  \]
  and we are done.
\end{proof}


\begin{proposition}[Localising a monoid algebra]
  \label{0-loc-mon-alg}
  \uses{}
  % \lean{}
  % \leanok

  Let $R$ be a commutative ring.
  Let $M$ be a commutative monoid and $M'$ be its localization at some $S \subseteq M$.
  Then $R[M']$ is the localization of $R[M]$ at $\Span \{X^s | s \in S\}$.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  Toddlers and streets.
\end{proof}


\subsection{Group-like elements}


\begin{definition}[Group-like elements]
  \label{0-grp-like}
  \uses{}
  \lean{IsGroupLikeElem}
  \leanok

  An element $a$ of a coalgebra $A$ is \emph{group-like} if $\eta(a) = 1$ and $\Delta(a) = a \ox a$,
  where $\eta$ is the counit and $\Delta$ is the comultiplication map.

  We write $\GrpLike A$ for the set of group-like elements of $A$.
\end{definition}


\begin{proposition}[Group-like elements form a group]
  \label{0-grp-like-grp}
  \uses{0-grp-like}
  \lean{GroupLike.instGroup, GroupLike.instCommGroup}
  \leanok

  Group-like elements $\GrpLike A$ of a bialgebra $A$ form a monoid.

  Group-like elements $\GrpLike A$ of a Hopf algebra $A$ form a group.
\end{proposition}
\begin{proof}
  \uses{}
  \leanok

  Check that group-like elements are closed under unit, multiplication and inverses.
\end{proof}


\begin{lemma}[Bialgebra homs preserve group-like elements]
  \label{0-grp-like-map}
  \uses{0-grp-like}
  \lean{IsGroupLikeElem.map}
  \leanok

  Let $f : A \to B$ be a bi-algebra hom. If $a \in A$ is group-like, then $f(a)$ is group-like too.
\end{lemma}
\begin{proof}
  \uses{}
  \leanok

  $a$ is a unit, so $f(a)$ is a unit too. Then
  \[
    f(a) \ox f(a) = (f \ox f)(\Delta_A(a)) = \Delta_B(f(a))
  \]
  so $f(a)$ is group-like.
\end{proof}


\begin{lemma}
  \label{0-grp-like-grp-alg-of}
  \uses{0-grp-like}
  \lean{MonoidAlgebra.isGroupLikeElem_of}
  \leanok

  If $R$ is a commutative semiring, $A$ is a Hopf algebra over $R$ and
  $G$ is a group, then every element of the image of $G$ in $A[G]$ is group-like.
\end{lemma}
\begin{proof}
  \uses{}
  \leanok

  This is an easy check.
\end{proof}


\begin{lemma}
  \label{0-grp-like-grp-alg-span}
  \uses{0-grp-like}
  \lean{MonoidAlgebra.span_isGroupLikeElem}
  \leanok

  If $R$ is a commutative semiring, $A$ is a Hopf algebra over $R$ and
  $G$ is a group, then the group-like elements in $A[G]$ span $A[G]$ as
  an $A$-module.

\end{lemma}
\begin{proof}
  \uses{0-grp-like-grp-alg-of}
  \leanok

  This follows immediately from \ref{0-grp-like-grp-alg-of}.
\end{proof}


\begin{lemma}[Independence of group-like elements]
  \label{0-grp-like-lin-indep}
  \uses{0-grp-like}
  \lean{Coalgebra.linearIndepOn_isGroupLikeElem}
  \leanok

  The group-like elements in a bialgebra $A$ over a domain are linearly independent.
\end{lemma}
\begin{proof}
  \uses{0-tensor-lin-indep}
  \leanok

  Let's prove that any finite set $s$ of group-like elements is linearly independent, by induction on $s$.

  $\emptyset$ is clearly linearly independent.

  Assume now that the finite set $s$ of group-like elements is linearly independent, that $a \notin s$ is group-like, and let's show that $s \cup \{a\}$ is linearly independent too.

  Assume there is some $c : A \to R$ such that $\sum_{x \in s} c_x x = c_a a$.
  Since $a$ and all elements of $s$ are group-like, we compute
  \begin{align*}
    \sum_{x, y \in s} c_x c_y x \otimes y
    & = c_a ^ 2 a \otimes a \\
    & = c_a ^ 2 \Delta(a) \\
    & = c_a \Delta\left(\sum_{x \in s} c_x x\right) \\
    & = \sum_{x \in s} c_a c_x \Delta(x) \\
    & = \sum_{x \in s} c_a c_x x \otimes x
  \end{align*}
  By Lemma \ref{0-tensor-lin-indep}, the $x \otimes y$ are linearly independent and therefore $c_x ^ 2 = c_a c_x$ and $c_x c_y = 0$ if $x \ne y$.

  If $c_x = 0$ for all $x \in s$, then we are clearly done.
  Else find $x \in s$ such that $c_x \ne 0$.
  From the above two equations, we get that $c_x = c_a$ and $c_y = 0$ for all $y \in s, y \ne x$.
  Therefore
  \[c_x x = \sum_{y \in s} c_y y = c_a a = c_x a\]
  and $x = a$.
  Contradiction.
\end{proof}


\begin{lemma}[Group-like elements in a group algebra]
  \label{0-grp-like-grp-alg}
  \uses{0-grp-like}
  \lean{MonoidAlgebra.isGroupLikeElem_iff_mem_range_of}
  \leanok

  Let $R$ be a domain.
  The group-like elements of $R[M]$ are exactly the image of $M$.
\end{lemma}
\begin{proof}
  \uses{0-grp-like-lin-indep}
  \leanok

  See Lemma 12.4 in \cite{Milne_2017}.
\end{proof}


\begin{proposition}[Galois connection between group algebra and group-like elements]
  \label{0-grp-alg-grp-like-gc}
  \uses{0-grp-like}
  % \lean{}
  % \leanok

  Let $R$ be a domain, $G$ a commutative group and $A$ a $R$-bialgebra.
  Then bialgebra homs $R[G] \to A$ are in bijection with group homs $G \to \GrpLike A$.
\end{proposition}
\begin{proof}
  \uses{0-grp-like-map, 0-grp-like-grp-alg}
  % \leanok

  If $f : G \to \GrpLike A$ is a group hom, then we get
  \begin{align*}
    R[G] \to A
    g \mapsto f(g)
  \end{align*}
  This is clearly an algebra hom,
  so for it to be a bialgebra hom we only need to check comultiplication is preserved.
  We only need to check this on $g \in G$, in which case
  \[(f \tensor f)(\Delta(g)) = (f \tensor f)(g \tensor g) = f(g) \tensor f(g) = \Delta(f(g))\]
  since $f(g) \in \GrpLike A$.

  If $f : R[G] \to A$ is a bialgebra hom,
  then it restricts to a group hom $\GrpLike R[G] \to \GrpLike A$
  by Proposition \ref{0-grp-like-map}.
  Now use that $\GrpLike R[G] \cong G$ from Proposition \ref{0-grp-like-grp-alg}.
\end{proof}


\begin{proposition}[Quotients by binomial ideals]
  \label{0-grp-like-quot-hopf}
  \uses{0-grp-like, 0-hopf-ideal}
  % \lean{}
  % \leanok

  Let $A$ be a Hopf algebra, $H$ be a subgroup of $\GrpLike A$ and
  \[
    I = \langle h_1 - h_2 : h_1,h_2 \in H \rangle
  \]
  be an ideal. The $I$ is a Hopf ideal.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  TODO
\end{proof}


\subsection{Diagonalizable bialgebras}


\begin{definition}[Diagonalizable bialgebras]
  \label{0-is-diag-bialg}
  \uses{}
  \lean{Bialgebra.IsDiagonalisable}
  \leanok

  A bialgebra is called diagonalizable if it is isomorphic to a group algebra.
\end{definition}


\begin{lemma}
  \label{0-is-diag-bialg-group-like-span}
  \uses{0-is-diag-bialg, 0-grp-like}
  \lean{Bialgebra.span_isGroupLikeElem_eq_top_of_isDiagonalisable}
  \leanok

  A diagonalizable bialgebra is spanned by its group-like elements.
\end{lemma}
\begin{proof}
  \uses{0-grp-like-grp-alg-span}
  \leanok

  This is true for a group algebra by \ref{0-grp-like-grp-alg-span}, and the
  property of being spanned by its group-like elements is preserves by
  isomorphisms of bialgebras.
\end{proof}


\begin{proposition}
  \label{0-bialg-bij-of-span-grp-like}
  \uses{0-is-diag-bialg, 0-grp-like-grp}
  % \lean{Bialgebra.liftGroupLikeBialgHom_bijective_of_span_isGroupLikeElem_eq_top}
  % \leanok

  Let $A$ be a bialgebra over a domain $R$,
  let $G$ be a subgroup of $\GrpLike(A)$ (which is a monoid by \ref{0-grp-like-grp}).
  If $A$ is generated by $G$,
  then the unique bialgebra morphism from $R[G]$ to $A$
  sending each element of $G$ to itself is bijective.
\end{proposition}
\begin{proof}
  \uses{0-grp-like-lin-indep}
  \leanok

  This morphism is injective by the linear independence of group-like elements
  (\ref{0-grp-like-lin-indep}), and surjective by assumption.
\end{proof}


\begin{proposition}[Quotient of a diagonalisable bialgebra is diagonalisable]
  \label{0-is-diag-bialg-quot}
  \uses{0-is-diag-bialg}
  % \lean{}
  % \leanok

  Let $R$ be a domain, $G$ a commutative group,
  $A$ a $R$-bialgebra and $f : R[G] \to A$ a surjective bialgebra hom.
  Then $R[f(G)] \cong A$ as bialgebras.
\end{proposition}
\begin{proof}
  \uses{0-grp-like-grp, 0-bialg-bij-of-span-grp-like}
  % \leanok

  Note that $R[G] \xrightarrow f A$ factors as $R[G] \xrightarrow f R[f(G)] \xrightarrow\phi A$,
  where $f(G)$ is a group by Proposition \ref{0-grp-like-grp}.

  Since $R[G] \xrightarrow f A$ is surjective, so is $R[f(G)] \xrightarrow\phi A$.
  Therefore Proposition \ref{0-bialg-bij-of-span-grp-like} applies to $f(G)$ inside $A$,
  and we get $R[f(G)] \cong A$.
\end{proof}


\begin{corollary}
  \label{0-is-diag-bialg-iff-span-group-like}
  \uses{0-is-diag-bialg, 0-grp-like}
  \lean{Bialgebra.isDiagonalisable.iff_span_isGroupLikeElem_eq_top}
  \leanok

  A bialgebra over a domain is diagonalizable if and only if it is spanned by its
  group-like elements.
\end{corollary}
\begin{proof}
  \uses{0-is-diag-bialg-group-like-span, 0-bialg-bij-of-span-grp-like}
  \leanok

  We know that a diagonalizable bialgebra is spanned by its group-like elements
  by \ref{0-is-diag-bialg-group-like-span}, and that a bialgebra over a domain
  that is spanned by its group-like elements is diagonalizable by
  \ref{0-is-diag-bialg-quot} (and by the fact that a bijective morphism
  of bialgebras is an isomorphism).
\end{proof}

Proposition \ref{0-bialg-bij-of-span-grp-like} and Corollary \ref{0-is-diag-iff-grp-like-span} are false over a general commutative ring.
Indeed, let $R$ be a commutative ring and let $G$ be a group.
Then the group-like elements of $R[G]$ correspond to locally constant maps from $Spec R$ to $G$ (with the discrete topology),
hence they are of the form $e_1 g_1+\cdots+e_r g_r$, with the $g_i$ in $G$ and $e_1,\ldots,e_r$ a family of pairwise orthogonal idempotent elements of $R$ that sum to $1$.
So $R[G]$ is not isomorphic to the group algebra over its group-like elements unless $Spec R$ is connected.
As for the corollary, a bialgebra of the form $R_1[G_1]\times\cdots\times R_n[G_n]$,
seen as a bialgebra over $R_1\times\cdots\times R_n$,
is generated by its group-like elements but not diagonalizable.w


\subsection{The group algebra functor}


\begin{proposition}[The antipode is a antihomomorphism]
  \label{0-antipode-mul}
  \uses{}
  \lean{HopfAlgebra.antipode_mul_antidistrib, HopfAlgebra.antipode_mul_distrib}
  \leanok

  If $A$ is a $R$-Hopf algebra, then the antipode map $s : A \to A$ is anti-commutative, ie $s(a * b) = s(b) * s(a)$. If further $A$ is commutative, then $s(a * b) = s(a) * s(b)$.
\end{proposition}
\begin{proof}
  \uses{}
  \leanok

  Any standard reference will have a proof.
\end{proof}


\begin{proposition}[Bialgebras are comonoid objects in the category of algebras]
  \label{0-bialg-equiv-comon-alg}
  \uses{}
  \lean{commBialgCatEquivComonCommAlg}
  \leanok

  The category of $R$-bialgebras is equivalent to comonoid objects in the category of $R$-algebras.
\end{proposition}
\begin{proof}
  \uses{}
  \leanok

  Turn the arrows around.
\end{proof}


\begin{proposition}[Hopf algebras are cogroup objects in the category of algebras]
  \label{0-hopf-alg-equiv-cogrp-alg}
  \uses{}
  \lean{commHopfAlgCatEquivCogrpCommAlg}
  \leanok

  The category of $R$-Hopf algebras is equivalent to cogroup objects in the category of $R$-algebras.
\end{proposition}
\begin{proof}
  \uses{0-bialg-equiv-comon-alg, 0-antipode-mul}
  \leanok

  Turn the arrows around.
  Most of the diagrams have been turned around in Proposition \ref{0-bialg-equiv-comon-alg} already.
\end{proof}


\begin{definition}[The group algebra functor]
  \label{0-grp-alg}
  \uses{}
  \lean{commGrpAlg}
  \leanok

  For a commutative ring $R$, we have a functor $G \rightsquigarrow R[G] : \Grp \to \Hopf_R$.
\end{definition}


\begin{proposition}[The group algebra functor is fully faithful]
  \label{0-full-faithful-grp-alg}
  \uses{0-grp-alg}
  \lean{MonoidAlgebra.mapDomainBialgHomMulEquiv, AddMonoidAlgebra.mapDomainBialgHomMulEquiv, commGrpAlg.fullyFaithful, commGrpAlg.instFull, commGrpAlg.instFaithful}
  \leanok

  Let $R$ be a domain.
  The functor $G \rightsquigarrow R[G]$ from the category of groups to the category of Hopf algebras over $R$ is fully faithful.
\end{proposition}
\begin{proof}
  \uses{0-grp-like-grp-alg, 0-grp-like-map}
  \leanok

  The functor is clearly faithful.
  Now for the full part, if $f : R[G] \to R[H]$ is a Hopf algebra hom, then we get a series of maps
  \[
    G \simeq \text{ group-like elements of } R[G] \to \text{ group-like elements of } R[H] \simeq H
  \]
  and each map separately is clearly multiplicative.
\end{proof}

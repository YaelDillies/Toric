\section{Introduction to Affine Toric Varieties}


\subsection{The Torus}


\begin{definition}
  \label{1-1-torus}
  \lean{SplitTorus, SplitTorus.instCanonicallyOver}
  \leanok

  The (algebraic) torus $\Gm^n = \Spec(R[x_1^{\pm 1}, \dotsc, x_n^{\pm 1}])$ over $\Spec R$.
\end{definition}


\begin{definition}
  \label{1-1-cochar}
  \uses{1-1-torus}
  % \lean{}
  % \leanok

  One-parameter subgroup: a group morphism $\lambda : \Gm \to \Gm^n$.
\end{definition}


\begin{definition}
  \label{1-1-char}
  \lean{SchemeOver.characterGroup}
  \leanok

  The {\bf character lattice} $M = X(\Gm^n) := \Hom_{\mathsf{GrpSch}}(\Gm^n, \Gm)$.
  An element is (unsurprisingly) called a {\bf character}.
\end{definition}


\begin{proposition}
  \label{1-1-char-torus}
  \uses{1-1-char}
  % \lean{}
  % \leanok

  $M = X(\Gm^n) \cong \Z^n$. For $m \in M$ we write $\chi^m$ for the corresponding character.
\end{proposition}
\begin{proof}
  \uses{0-fg-comm-grp-equiv-diag-grp-sch}
  % \leanok

\end{proof}


\begin{definition}
  \label{1-1-cochar-lat}
  \uses{1-1-cochar}
  % \lean{}
  % \leanok

  One-parameter subgroup/cocharacter lattice $N := \Hom(\Gm, \Gm^n)$.
\end{definition}


\begin{proposition}[Proposition 1.1.1(a)]
  \label{1-1-1-group-hom-subtorus}
  \uses{1-1-torus}
  % \lean{}
  % \leanok

  If $T_1, T_2$ are tori and $\Phi : T_1 \to T_2$ is a morphism which is a group homomorphism, then $\im \Phi$ is a closed subvariety which is a torus.
\end{proposition}
\begin{proof}
  \uses{0-fg-comm-grp-equiv-diag-grp-sch}
  % \leanok


\end{proof}


\begin{proposition}[A subgroup of a torus is a torus]
  \label{1-1-1-subgroup-subtorus}
  \uses{1-1-torus}
  % \lean{}
  % \leanok

  If $H \subseteq T$ is an irreducible subvariety which is a subgroup, then $H$ is a torus.
\end{proposition}
\begin{proof}
  \uses{0-fg-comm-grp-equiv-diag-grp-sch}
  % \leanok

  TODO
\end{proof}


\begin{definition}[The character eigenspace]
  \label{1-1-char-eigenspace}
  \uses{1-1-char}
  % \lean{}
  % \leanok

  For a finite dimensional representation of a torus $T$ on $W$, the {\bf character eigenspace} of a character $\chi \in X(T)$ is
  \[
    W_m = \{w\in W : t\cdot w = \chi(t)\text{ for all } t\in T \}.
  \]
\end{definition}


\begin{proposition}[Decomposition into character eigenspaces]
  \label{1-1-2-char-eigenspace-direct-sum}
  \uses{1-1-char-eigenspace, 1-1-torus}

  The space decomposes into the direct sum of the character eigenspaces.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  TODO
\end{proof}


\begin{definition}
  \label{1-1-char-cochar-pairing}
  \uses{1-1-char}
  \uses{1-1-cochar-lat}
  % \lean{}
  % \leanok

  Character lattice and one-parameter subgroup pairing.
\end{definition}


\begin{proposition}
  \label{1-1-cochar-torus}
  \uses{1-1-cochar-lat}
  % \lean{}
  % \leanok

  $N = \Hom(M, \Z) \cong  \Z^n$. For $u \in N$ we write $\lambda^u$ for the corresponding cocharacter.
\end{proposition}
\begin{proof}
  \uses{1-1-char-torus, 1-1-char-cochar-pairing}
  % \leanok

\end{proof}


\subsection{The Definition of Affine Toric Variety}


\begin{definition}
  \label{1-1-3-aff-tor-var}
  \uses{1-1-torus}
  \lean{ToricVariety}
  \leanok

  A {\bf toric variety} is a variety $X$ with
  \begin{itemize}
    \item an open embedding $T := (\bbC^\times)^n \hookrightarrow X$ with dense image
    \item such that the natural action $T \times T \to T$ of the torus on itself extends to an (algebraic) action $T \times X \to X$.
  \end{itemize}
\end{definition}


\subsection{Lattice Points}


\begin{definition}
  \label{1-1-phiA}
  \uses{1-1-char}
  % \lean{}
  % \leanok

  Given a finite set $\MCA = \{a_1, \dotsc, a_s\} \subseteq M$, define $\Phi_\MCA : T \to \mathbb{A}^s$ given by $\Phi_{\mathcal A} (t) = (\chi^{a_1} (t), \dotsc, \chi^{a_s} (t))$.
\end{definition}


\begin{definition}
  \label{1-1-7-ya}
  \uses{1-1-phiA}
  % \lean{}
  % \leanok

  $Y_\MCA$ is the (Zariski) closure of $\im \Phi_\MCA$ in $\mathbb A^s$.
\end{definition}


\begin{proposition}
  \label{1-1-8-aff-tor-var-ya}
  \uses{1-1-7-ya}
  \uses{1-1-char}

  Proposition 1.1.8
\end{proposition}
\begin{proof}
  \uses{1-1-1-group-hom-subtorus}
  % \leanok

  TODO
\end{proof}


\subsection{Toric Ideals}


\begin{proposition}
  \label{1-1-9-ideal-ya}
  \uses{1-1-7-ya}
  % \lean{}
  % \leanok

  The ideal of the affine toric variety $Y_\MCA$ is
  \[
    I(Y_\MCA) = \langle x^{\ell_+} - x^{\ell_-} | \ell \in L\rangle
  \]
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  See \cite{Cox_2011}.
\end{proof}


\begin{definition}
  \label{1-1-10-lattice-ideal}
  \uses{}
  \lean{AddMonoidAlgebra.monoidIdeal}
  \leanok

  The ideal $I_L = \langle x^\alpha - x^\beta |  \alpha, \beta \in \N^s \text{ and } \alpha - \beta \in L\rangle$ is called the {\bf lattice ideal} of the lattice $L \subseteq \Z^s$.

  A toric ideal is a prime lattice ideal.
\end{definition}


\begin{definition}
  \label{1-1-10-toric-ideal}
  \uses{1-1-10-lattice-ideal}
  \lean{AddMonoidAlgebra.IsToricIdeal}
  \leanok
  A {\bf toric ideal} is a prime lattice ideal.
\end{definition}


\begin{proposition}
  \label{1-1-11-toric-ideal-gen-binomial}
  \uses{1-1-10-toric-ideal}
  \lean{AddMonoidAlgebra.isToricIdeal_iff_exists_span_single_sub_single}
  % \leanok

  Proposition 1.1.11: an ideal is toric if and only if it's prime and generated by binomials $x^\alpha - x^\beta$.
\end{proposition}
\begin{proof}
  \uses{1-1-1-subgroup-subtorus, 1-1-9-ideal-ya}
  % \leanok

\end{proof}


\begin{proposition}[The spectrum of an affine monoid algebra is an affine toric variety]
  \label{1-1-14-aff-tor-var-spec-aff-mon-alg}
  \uses{0-aff-mon, 1-1-3-aff-tor-var}
  \lean{AffineToricVarietyFromMonoid.instToricVariety}
  \leanok

  If $S$ is an affine monoid, then $\Spec(\Bbbk[S])$ is an affine toric variety.
\end{proposition}
\begin{proof}
  \uses{0-aff-mon-alg-domain}
  % \leanok

  $i$ induces a morphism $T \to \Spec(\Bbbk[S])$. It's an open embedding as $i$ gives the localization of $\Bbbk[S]$ at $\chi^{a_i}$, so $\im i$ is an affine open. It's dominant as $\Spec(\Bbbk[S])$ is integral and so is irreducible, and $\im i$ is open and nonempty, so dense. The torus action is given by the natural restriction of comultiplication on $\Bbbk[x_1^{\pm1}, \dotsc, x_n^{\pm1}]$.
\end{proof}


\begin{proposition}[The character lattice of the spectrum of an affine monoid algebra]
  \label{1-1-14-char-spec-aff-mon-alg}
  \uses{1-1-14-aff-tor-var-spec-aff-mon-alg, 1-1-char}
  % \lean{}
  % \leanok

  If $S$ is an affine monoid, then the character lattice of $\Spec(\Bbbk[S])$ is $\Z S$.
\end{proposition}
\begin{proof}
  \uses{}
  % \leanok

  It is what it is.
\end{proof}


\begin{proposition}
  \label{1-1-14-spec-aff-mon-alg-eq-ya}
  \uses{0-aff-mon, 1-1-3-aff-tor-var, 1-1-7-ya}
  % \lean{}
  % \leanok

  If $S$ is an affine monoid and $\mathcal A$ is a finite set generating $S$ as a monoid, then $\Spec(\Bbbk[S]) = Y_{\mathcal A}$.
\end{proposition}
\begin{proof}
  \uses{1-1-8-aff-tor-var-ya, 1-1-14-char-spec-aff-mon-alg}
  % \leanok

  We get a $\Bbbk$-algebra homomorphism $\pi : \Bbbk[x_1, \dotsc, x_s] \to \Bbbk[\Z S]$ given by $\mathcal A$; this induces a morphism $\Phi_{\mathcal A} : T \to \Bbbk^s$. The kernel of $\pi$ is the toric ideal of $Y_{\mathcal A}$ and $\pi$ is clearly surjective, so $Y_{\mathcal A} = \mathbb V(\ker(\pi)) = \Spec(\Bbbk[x_1, \dotsc, x_s] / \ker(\pi)) = \Spec(\bbC[S])$.
\end{proof}


\begin{definition}
  \label{torActOnAlg}
  \uses{Torus}
  Torus action on semigroup algebra
\end{definition}


\subsection{Equivalence of Constructions}


\begin{lemma}
  \label{lmm:1-1-16}
  \uses{torActOnAlg}
\end{lemma}
\begin{proof}
  \uses{1-1-1-char-eigenspace-direct-sum}
  % \leanok

\end{proof}


\begin{theorem}
  \label{thm:1-1-17}
  \uses{0-aff-mon, 1-1-3-aff-tor-var, 1-1-7-ya, 1-1-10-lattice-ideal}
  TFAE:
  \begin{enumerate}
    \item $V$ is an affine toric variety.
    \item $V = Y_{\mathcal A}$ for some finite $\mathcal A$.
    \item $V$ is an affine variety defined by a toric ideal.
    \item $V = \Spec \Bbbk[S]$ for an affine monoid $S$.
  \end{enumerate}
\end{theorem}
\begin{proof}
  \uses{torActOnAlg, 1-1-8-aff-tor-var-ya, 1-1-9-ideal-ya, 1-1-14-aff-tor-var-spec-aff-mon-alg, lmm:1-1-16}
  % \leanok

\end{proof}
